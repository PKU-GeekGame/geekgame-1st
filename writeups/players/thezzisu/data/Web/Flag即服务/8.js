const fs = require("fs");

// const code = "console.log(1)";
const code = fs.readFileSync("inject.txt").toString();

const numstr = [...code].map((s) => s.charCodeAt(0)).join("$");

// const code = `99$111$110$115$111$108$101$46$108$111$103$40$49$50$51$41$59$99$111$110$115$111$108$101$46$108$111$103$40$112$114$111$99$101$115$115$46$112$105$100$41$59`;

const A =
  "(($1)=>($2)=>($3)=>($4=``+[][$1])=>($5=``+(![])[$1])=>($$96=1)=>($6=``+$$96[$1])=>($7=``+``[$1])=>($91=$2[0]+$2[2]+$2[1]+$3[0])=>($92=$3[1]+$3[3]+$3[0]+$3[2]+$3[1]+$1[2]+$4[8])=>($93=$3[3]+$4[24]+$2[1]+$2[2])=>($98=$3[0]+$1[1]+$7[9]+$7[10]+$7[11]+$7[12]+$7[13]+$7[14])=>($911=(+101)[$98](21)[1])=>($912=(+211)[$98](31)[1])=>($94=$6[11]+$2[1]+$912)=>($96=$2[3]+$912+$2[2]+$4[23]+$3[0])=>($97=(``+{})[3]+$1[1]+$4[23]+$1[2])=>($99=``[$2[0]+$1[1]+$1[2]+$3[0]+$1[0]+$1[1]+$2[2]+$1[1]+$3[1]]())=>($9$=[[]][$1[0]+$1[1]+$1[2]+$1[0]+$2[1]+$3[0]]([[]])+``)=>($90=[][$91][$1]($92+$93)())=>($9=$3[3]+$2[3]+$1[0]+$2[1]+$912+$3[3])=>($8=$4[23]+$3[0]+$2[1]+$2[2]+$4[23]+$1[0]+$1[3])=>($0=$90($9)(``[$8]())[2])=>($95=$4[0]+$3[1]+$1[1]+$6[11]+$0+$911+$4[21]+$3[1]+$0+$4[28]+$4[29]+$4[30])=>$90(`";
const B = "`[$96](`$$`)[$94](($9) => ``[$1][$95]($9))[$97](``)))(";
const C = ")(``+![])(``+!![])()()()()()()()()()()()()()()()()()()()()()";

const d =
  "([][(![]+[])[0]+(![]+[])[2]+(![]+[])[1]+(!![]+[])[0]]+[])[3]+(!![]+[][(![]+[])[0]+(![]+[])[2]+(![]+[])[1]+(!![]+[])[0]])[10]+([][[]]+[])[1]+(![]+[])[3]+(!![]+[])[0]+(!![]+[])[1]+([][[]]+[])[0]+([][(![]+[])[0]+(![]+[])[2]+(![]+[])[1]+(!![]+[])[0]]+[])[3]+(!![]+[])[0]+(!![]+[][(![]+[])[0]+(![]+[])[2]+(![]+[])[1]+(!![]+[])[0]])[10]+(!![]+[])[1]";

const result = A + numstr + B + d + C;

console.log(result.length);

// console.log(eval(result));

fs.writeFileSync("out.txt", result);
